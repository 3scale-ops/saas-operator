---

- name: Manage backend-environment ConfigMap for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-environment-configmap.yaml') }}"

- name: Manage backend-redis SecretDefinition for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-redis-secretdefinition.yaml') }}"

- name: Manage backend-system-events-hook SecretDefinition for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-system-events-hook-secretdefinition.yaml') }}"

- name: Manage backend-internal-api SecretDefinition for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-internal-api-secretdefinition.yaml') }}"

- name: Manage backend-error-monitoring SecretDefinition for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-error-monitoring-secretdefinition.yaml') }}"
  when: error_monitoring_enabled|bool == true

- name: Manage backend-listener Deployment for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-listener-deployment.yaml') }}"

- name: Manage backend-worker Deployment for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-worker-deployment.yaml') }}"

- name: Manage backend-cron Deployment for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-cron-deployment.yaml') }}"

- name: Manage backend-listener Service for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-listener-service.yaml') }}"

- name: Manage backend-listener PodMonitor for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-listener-podmonitor.yaml') }}"

- name: Manage backend Route for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-route.yaml') }}"

- name: Manage backend-worker PodMonitor for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-worker-podmonitor.yaml') }}"

- name: Manage backend GrafanaDashboard for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-grafanadashboard.yaml') }}"

- name: Manage backend-storage Main GrafanaDashboard for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-storage-main-grafanadashboard.yaml') }}"

- name: Manage backend-storage Redis GrafanaDashboard for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-storage-redis-grafanadashboard.yaml') }}"

- name: Manage backend-storage Node GrafanaDashboard for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-storage-node-grafanadashboard.yaml') }}"

- name: Manage backend-storage Twemproxy GrafanaDashboard for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-storage-twemproxy-grafanadashboard.yaml') }}"

- name: Manage backend-storage Sentinel GrafanaDashboard for Backend {{ meta.name }} on Namespace {{ meta.namespace }}
  k8s:
    definition: "{{ lookup('template', 'backend-storage-sentinel-grafanadashboard.yaml') }}"
