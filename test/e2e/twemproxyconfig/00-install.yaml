---
apiVersion: saas.3scale.net/v1alpha1
kind: RedisShard
metadata:
  name: shard01
  namespace: default
spec: {}
---
apiVersion: saas.3scale.net/v1alpha1
kind: Sentinel
metadata:
  name: sentinel
  namespace: default
spec:
  replicas: 3
  config:
    monitoredShards:
      shard01:
        - redis://redis-shard-shard01-0.redis-shard-shard01:6379
        - redis://redis-shard-shard01-1.redis-shard-shard01:6379
        - redis://redis-shard-shard01-2.redis-shard-shard01:6379
---
apiVersion: saas.3scale.net/v1alpha1
kind: TwemproxyConfig
metadata:
  name: backend-twemproxyconfig
  namespace: default
spec:
  reconcileServerPools: false
  serverPools:
    - name: test
      bindAddress: 0.0.0.0:22121
      timeout: 5000
      tcpBacklog: 512
      preConnect: false
      topology:
        - shardName: logical-shard01
          physicalShard: shard01
        - shardName: logical-shard02
          physicalShard: shard01